<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise chaining .then() calls</title>
</head>
<body>
    <h1>Promise chaining .then() calls</h1>
</body>
<script>
/*
let p1 = new Promise((resolve,reject)=>{
        setTimeout(() => {
            console.log("resolved after 2 second");
            resolve("promise 1"); //random value
        }, 2000);
    })

    p1.then((value)=>{
        console.log(value);
        return new Promise((resolve,reject)=>{
            setTimeout(() => {
                resolve("promise 2");
            }, 2000);
        });
    }).then((value)=>{
        console.log(value);
        return "new function";
    }).then((value)=>{
        console.log(value);
        console.log("this is another new function");
        console.log("we r done now");        
    })
*/


/*
//diff between return and resolve in promisse chaininng
let p1 = new Promise((resolve,reject)=>{
        setTimeout(() => {
            console.log("resolved after 2 second");
            resolve("promise 1"); //random value
            // return("promise 1"); //random value //at the time of using promise,we should use resolve
                                    //not return but yes when we use custom function then can use 
                                    //return 
        }, 2000);
    })

    p1.then((value)=>{
        console.log(value);
        return new Promise((resolve,reject)=>{
            setTimeout(() => {
                resolve("promise 2");
            }, 2000);
        });
    }).then((value)=>{
        console.log(value);
        return "new function";
        //resolve("new function"); //i cant use this bcs i am using custom function so i have to use 
                                 //return not resolve,only in case of promise ,i can use resolve
    }).then((value)=>{
        console.log(value);
        console.log("this is another new function");
        console.log("we r done now");        
    })
*/
    ////////////////
    console.log("loadScript Function");

    const loadScript = (src)=>{
        
        return new Promise((resolve,reject)=>{
            let script = document.createElement("script");
            script.type = "text/javascript";
            script.src = src;
            document.body.appendChild(script);
            script.onload = ()=>{
                resolve("script has been loaded");
            }
            script.onerror = ()=>{
                // reject("script has been rejected");
                reject(new Error("script has been rejected"));
            }
        });
    }

    // let pr1 = loadScript("https://google.com");
    let pr1 = loadScript("https://cdninjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/js/all.min.js");
  
    pr1.then((value)=>{
        console.log(value);        
    }).catch((error)=>{
        console.log("some error occured");
    }).finally(()=>{
        console.log("experiment done");
        
    })
  

  /*
    pr1.then((value)=>{
        console.log(value);        
    },(error)=>{
        console.log("some error occured");
    });
    */
    
</script>
</html>